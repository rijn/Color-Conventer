!function(window,document,undefined){"use strict";function ColorConverter(a){var b=this;if(b.colors=[],!(b instanceof ColorConverter))return new ColorConverter(a);b.options=a||{};for(var c in defaults)null==b.options[c]&&(b.options[c]=defaults[c]);b.options.colors&&b["import"](b.options.colors)}Array.prototype.forEach=function(a,b){var c=this.length,b=arguments[1];if("function"!=typeof a)throw Error("unknown function");for(var d=0;c>d;d++)a.call(b,this[d],d,this)},Array.prototype.getLast=function(){return this instanceof Array?this[this.length-1]:!1},Array.prototype.search=function(a){if(this instanceof Array){var b=[];for(var c in this)this[c]==a&&b.push(c);var d=b.length;return 0==d?!1:1==d?b[0]:b}return!1},Object.prototype.clone=function(a){if("object"!=typeof this)return this;if(null==this)return this;var b=this instanceof Array?new Array:new Object;for(var c in this)b[c]=this[c].clone();return b},Object.prototype.check=function(){if("object"!=typeof this)return!1;for(var a=flatten(arguments),b=0;b<a.length;b++)if(!this.hasOwnProperty(a[b]))return!1;return!0};var flatten=function(a){for(var b=function(a,b){return null!=a&&hasOwnProperty.call(a,b)},c=function(a){var b=a&&a.length;return"number"==typeof b&&b>=0},d=function(a){return"[object Array]"===toString.call(a)},e=function(a){return b(a,"callee")},f=[],g=0,h=0,i=a&&a.length;i>h;h++){var j=a[h];if(c(j)&&(d(j)||e(j))){j=flatten(j);var k=0,l=j.length;for(f.length+=l;l>k;)f[g++]=j[k++]}else f[g++]=j}return f},min=function(){for(var a=flatten([arguments]),b=a[0],c=0;c<a.length;c++)b>a[c]&&(b=a[c]);return b},max=function(){for(var a=flatten([arguments]),b=a[0],c=0;c<a.length;c++)b<a[c]&&(b=a[c]);return b},acc={div:function(a,b){var c,d,e=0,f=0;try{e=a.toString().split(".")[1].length}catch(g){}try{f=b.toString().split(".")[1].length}catch(g){}return c=Number(a.toString().replace(".","")),d=Number(b.toString().replace(".","")),acc.mul(c/d,Math.pow(10,f-e))},mul:function(a,b){var c=0,d=a.toString(),e=b.toString();try{c+=d.split(".")[1].length}catch(f){}try{c+=e.split(".")[1].length}catch(f){}return Number(d.replace(".",""))*Number(e.replace(".",""))/Math.pow(10,c)},add:function(a,b){var c,d,e;try{c=a.toString().split(".")[1].length}catch(f){c=0}try{d=b.toString().split(".")[1].length}catch(f){d=0}return e=Math.pow(10,Math.max(c,d)),Number((a*e+b*e)/e)},sub:function(a,b){var c,d,e,f;try{c=a.toString().split(".")[1].length}catch(g){c=0}try{d=b.toString().split(".")[1].length}catch(g){d=0}return e=Math.pow(10,Math.max(c,d)),f=c>=d?c:d,Number(((a*e-b*e)/e).toFixed(f))}},spaces={constant:{Epsilon:216/24389,Kappa:24389/27,XYZ_WhiteRefrence:{X:95.047,Y:100,Z:108.883},CubicRoot:function(a){return Math.pow(a,1/3)}},RGB:{"import":function(){var a=flatten(arguments),b=[];if(a[0].check("R","G","B"))return{RGB:a[0]};if(a.length<3){var c=/([0-9a-fA-F]{6}|[0-9a-fA-F]{3})/,d=a[0].toLowerCase();if(!d||!c.test(d))return!1;if(d=c.exec(d)[0],3===d.length){for(var e="",f=0;3>f;f+=1)e+=d.slice(f,f+1).concat(d.slice(f,f+1));d=e}for(var b=[],f=0;6>f;f+=2)b.push(parseInt("0x"+d.slice(f,f+2)))}else for(var f=0;3>f;f++)b[f]=Number(a[f]);for(var f in b){if(b[f]<0)return!1;if(b[f]>255)return!1}return{RGB:{R:b[0],G:b[1],B:b[2]}}},XYZ:{convert:function(a){function b(a){return 100*(a>.04045?Math.pow((a+.055)/1.055,2.4):a/12.92)}return a.R=b(a.R/255),a.G=b(a.G/255),a.B=b(a.B/255),{X:.412453*a.R+.35758*a.G+.180423*a.B,Y:.212671*a.R+.71516*a.G+.072169*a.B,Z:.019334*a.R+.119193*a.G+.950227*a.B}},cost:1},CMY:{convert:function(a){var b,c,d;return b=(255-a.R)/255,c=(255-a.G)/255,d=(255-a.B)/255,{C:b,M:c,Y:d}},cost:0},CMYK:{convert:function(a){var b,c,d,e;return e=0,b=(255-a.R)/255,c=(255-a.G)/255,d=(255-a.B)/255,e=min([b,c,d]),1==e?b=c=d=0:(b=(b-e)/(1-e),c=(c-e)/(1-e),d=(d-e)/(1-e)),{C:b,M:c,Y:d,K:e}},cost:0},HSL:{convert:function(a){var b,c,d,e,f,g=a.R/255,h=a.G/255,i=a.B/255,j=min(g,h,i),k=max(g,h,i),l=k-j,m=(k+j)/2;return 0==l?(e=0,f=0):(f=.5>m?l/(k+j):l/(2-k-j),b=((k-g)/6+l/2)/l,c=((k-h)/6+l/2)/l,d=((k-i)/6+l/2)/l,g==k?e=d-c:h==k?e=1/3+b-d:i==k&&(e=2/3+c-b),0>e&&(e+=1),e>1&&(e-=1)),{H:360*e,S:f,L:m}},cost:0},HSV:{convert:function(a){var b,c,d,e=a.R/255,f=a.G/255,g=a.B/255,h=min(e,f,g),i=max(e,f,g);if(h==i)return d=h,{H:0,S:0,V:d};var j=e==h?f-g:g==h?e-f:g-e,k=e==h?3:g==h?1:5;return b=60*(k-j/(i-h)),c=(i-h)/i,d=i,{H:b,S:c,V:d}},cost:0}},CMY:{"import":function(){var a=flatten(arguments);if(a[0].check("C","M","Y"))return{CMY:a[0]};if(a.length<3)return!1;for(var b=0;3>b;b++)if(a[b]<0||a[b]>1)return!1;return{CMY:{C:a[0],M:a[1],Y:a[2]}}},RGB:{convert:function(a){var b,c,d;return b=255*(1-_cmyk.C),c=255*(1-_cmyk.M),d=255*(1-_cmyk.Y),{R:b,G:c,B:d}},cost:0}},RGBA:{"import":function(){var a=flatten(arguments);if(a[0].check("R","G","B","A"))return{RGBA:a[0]};if(a.length<7)return!1;for(var b=0;7>b;b++)if(a[b]<0||a[b]>255)return!1;return a[3]>1?!1:{RGBA:{FR:a[0],FG:a[1],FB:a[2],Alpha:a[3],BR:a[4],BG:a[5],BB:a[6]}}},RGB:{convert:function(a){return{R:(1-a.Alpha)*a.BR+a.Alpha*a.FR,G:(1-a.Alpha)*a.BG+a.Alpha*a.FG,B:(1-a.Alpha)*a.BB+a.Alpha*a.FB}},cost:1}},CMYK:{"import":function(){var a=flatten(arguments);if(a[0].check("C","M","Y","K"))return{CMYK:a[0]};if(a.length<4)return!1;for(var b=0;4>b;b++)if(a[b]<0||a[b]>1)return!1;return{CMYK:{C:a[0],M:a[1],Y:a[2],K:a[3]}}},RGB:{convert:function(a){var b,c,d;return b=(1-a.K)*(1-a.C)*255,c=(1-a.K)*(1-a.M)*255,d=(1-a.K)*(1-a.Y)*255,{R:b,G:c,B:d}},cost:0}},HSL:{"import":function(){var a=flatten(arguments);return a[0].check("H","S","L")?{HSL:a[0]}:a.length<3?!1:a[0]<0||a[0]>360||a[1]<0||a[2]<0||a[1]>1||a[2]>1?!1:{HSL:{H:a[0],S:a[1],L:a[2]}}},RGB:{convert:function(a){var b,c,d,e=a.H,f=a.S,g=a.L,h=acc.mul(acc.sub(1,Math.abs(acc.sub(acc.mul(2,g),1))),f),i=e/60,j=acc.mul(h,1-Math.abs(i%2-1)),k=parseInt(i),l=acc.sub(g,acc.div(h,2));switch(k){case 0:b=h,c=j,d=0;break;case 1:b=j,c=h,d=0;break;case 2:b=0,c=h,d=j;break;case 3:b=0,c=j,d=h;break;case 4:b=j,c=0,d=h;break;case 5:b=h,c=0,d=j}return b=acc.add(b,l),c=acc.add(c,l),d=acc.add(d,l),{R:255*b,G:255*c,B:255*d}},cost:0}},HSV:{"import":function(){var a=flatten(arguments);return a[0].check("H","S","L")?{HSL:a[0]}:a.length<3?!1:a[0]<0||a[0]>360||a[1]<0||a[2]<0||a[1]>1||a[2]>1?!1:{HSV:{H:a[0],S:a[1],V:a[2]}}},RGB:{convert:function(a){var b,c,d,e=a.H,f=a.S,g=a.V,h=g*f,i=e/60,j=h*(1-Math.abs(i%2-1)),k=parseInt(i),l=g-h;switch(k){case 0:b=h,c=j,d=0;break;case 1:b=j,c=h,d=0;break;case 2:b=0,c=h,d=j;break;case 3:b=0,c=j,d=h;break;case 4:b=j,c=0,d=h;break;case 5:b=h,c=0,d=j}return b+=l,c+=l,d+=l,{R:255*b,G:255*c,B:255*d}},cost:0}},XYZ:{"import":function(){var a=flatten(arguments);return a[0].check("X","Y","Z")?{XYZ:a[0]}:a.length<3?!1:{XYZ:{X:a[0],Y:a[1],Z:a[2]}}},RGB:{convert:function(a){function b(a){var b=255*a;return 0>b?0:b>255?255:b}var c=a.X/100,d=a.Y/100,e=a.Z/100,f=3.2406*c+-1.5372*d+e*-.4986,g=c*-.9689+1.8758*d+.0415*e,h=.0557*c+d*-.204+1.057*e;return f=f>.0031308?1.055*Math.pow(f,1/2.4)-.055:12.92*f,g=g>.0031308?1.055*Math.pow(g,1/2.4)-.055:12.92*g,h=h>.0031308?1.055*Math.pow(h,1/2.4)-.055:12.92*h,{R:b(f),G:b(g),B:b(h)}},cost:1},Lab:{convert:function(a){function b(a){return a>spaces.constant.Epsilon?spaces.constant.CubicRoot(a):(spaces.constant.Kappa*a+16)/116}var c=spaces.constant.XYZ_WhiteRefrence,d=b(a.X/c.X),e=b(a.Y/c.Y),f=b(a.Z/c.Z);return{L:Math.max(0,116*e-16),a:500*(d-e),b:200*(e-f)}},cost:1},LUV:{convert:function(a){function b(a){return a.X+15*a.Y+3*a.Z}var c=spaces.constant.XYZ_WhiteRefrence,d=a.Y/c.Y,e=d>spaces.constant.Epsilon?116*spaces.constant.CubicRoot(d)-16:spaces.constant.Kappa*d,f=b(a),g=b(c),h=0==f?0:4*a.X/f-4*c.X/g,i=0==f?0:9*a.Y/f-9*c.Y/g,j=13*e*h,k=13*e*i;return{L:e,U:j,V:k}},cost:1}},Lab:{"import":function(){var a=flatten(arguments);return a[0].check("L","a","b")?{Lab:a[0]}:a.length<3?!1:{Lab:{L:a[0],a:a[1],b:a[2]}}},XYZ:{convert:function(a){var b=(a.L+16)/116,c=a.a/500+b,d=b-a.b/200,e=spaces.constant.XYZ_WhiteRefrence,f=c*c*c,g=d*d*d;return{X:e.X*(f>spaces.constant.Epsilon?f:(c-16/116)/7.787),Y:e.Y*(a.L>spaces.constant.Kappa*spaces.constant.Epsilon?Math.pow((a.L+16)/116,3):a.L/spaces.constant.Kappa),Z:e.Z*(g>spaces.constant.Epsilon?g:(d-16/116)/7.787)}},cost:1},LCH:{convert:function(a){var b=Math.atan2(a.b,a.a);return b=b>0?b/Math.PI*180:360-Math.abs(b)/Math.PI*180,0>b?b+=360:b>=360&&(b-=360),{L:a.L,C:Math.sqrt(a.a*a.a+a.b*a.b),H:b}},cost:1}},LCH:{"import":function(){var a=flatten(arguments);return a[0].check("L","C","H")?{LCH:a[0]}:a.length<3?!1:{LCH:{L:a[0],C:a[1],H:a[2]}}},Lab:{convert:function(a){var b=a.H*Math.PI/180;return{L:a.L,a:Math.cos(b)*a.C,b:Math.sin(b)*a.C}},cost:1}},LUV:{"import":function(){var a=flatten(arguments);return a[0].check("L","U","V")?{LUV:a[0]}:a.length<3?!1:{LUV:{L:a[0],U:a[1],V:a[2]}}},XYZ:{convert:function(a){function b(a){return a.X+15*a.Y+3*a.Z}var c=spaces.constant.XYZ_WhiteRefrence,d=-1/3,e=4*c.X/b(c),f=9*c.Y/b(c),g=1/3*(52*a.L/(a.U+13*a.L*e)-1),h=(a.L+16)/116,i=a.L>spaces.constant.Kappa*spaces.constant.Epsilon?h*h*h:a.L/spaces.constant.Kappa,j=-5*i,k=i*(39*a.L/(a.V+13*a.L*f)-5),l=(k-j)/(g-d),m=l*g+j;return{X:100*l,Y:100*i,Z:100*m}},cost:1}}},defaults={colors:[]};ColorConverter.prototype={constructor:ColorConverter,"import":function(){for(var argu=Array.prototype.slice.call(arguments)[0],output=[],self=this,i=0;i<argu.length;i++){var _temp=flatten(argu[i]),_format=_temp.shift(),_para=_temp;if(!spaces.hasOwnProperty(_format))throw Error("Unsupport color spaces");var _obj=eval("(spaces."+_format+".import)");if(_obj===undefined)throw Error("Cannot convert from "+_format);var _res=_obj.call(this,_para);_res?(self.colors.push(_res),output.push(self.colors.length-1)):output.push(!1)}return output},"export":function(){var argu=flatten(arguments),format=argu.shift(),list=argu,output=[],self=this;if(!list.length)for(var i in self.colors)self.colors.hasOwnProperty(i)&&list.push(i);return list.forEach(function(_i){var _code=self.colors[_i];if(_code===undefined)throw Error("Undefined color");for(var _key=function(a){for(var b in a)return b}(_code),_temp=_code[_key],_tokens=[{_path:[_key],_cost:0,_terminal:!1}],_target=format,_depth=0;!function(a,b){for(var c in a)if(a.hasOwnProperty(c)&&!a[c]._terminal)return!1;return!0}(_tokens,_target)&&10>_depth;){var _deplicate=[];for(var key in _tokens)if(_tokens.hasOwnProperty(key)){var _on=_tokens[key],_nowkey=_on._path.getLast();if(spaces.hasOwnProperty(_nowkey)){var _obj=eval("(spaces."+_nowkey+")");for(var key in _obj)if(_obj.hasOwnProperty(key)){var _temp=_on.clone();_on._path.search(key)||_on._path.getLast()==_target?_temp._terminal=!0:(_temp._path.push(key),_temp._cost+=eval("(spaces."+_nowkey+"."+key+".cost)")),_deplicate.push(_temp)}_obj=null}}_tokens=_deplicate,_deplicate=null,_depth++}if(!_tokens.length)throw Error("No path to target");var _sort=[];for(var key in _tokens)_tokens.hasOwnProperty(key)&&_tokens[key]&&_tokens[key]._path.getLast()==_target&&_sort.push(_tokens[key]);if(_sort.sort(function(a,b){return a.cost>b.cost?-1:1}),_sort.length){for(var _rp=_sort[0]._path,_temp=eval("(_code."+_rp[0]+")"),i=1;i<_rp.length;i++)_temp=eval("(spaces."+_rp[i-1]+"."+_rp[i]+".convert("+JSON.stringify(_temp)+"))");output.push(_temp)}}),output},reset:function(){var a=this;return a.colors=[],!0}},window.ColorConverter=ColorConverter}(window,document);